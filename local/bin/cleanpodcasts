#!/bin/sh
set -eu

for dir in "$HOME/Podcasts"/*/; do
  cd "$dir" || continue

  # Find only regular files in this podcast directory
  find . -maxdepth 1 -type f -print | \
    sort -r | \
    awk 'NR > 5' | \
    while IFS= read -r file; do
      echo "Removing: $file"
      rm -- "$file"
    done
done
