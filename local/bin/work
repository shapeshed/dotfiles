#!/usr/bin/env sh
# 
set -eu

# If session 'work' doesn't exist, create and set it up
if ! tmux has-session -t work 2>/dev/null; then
  tmux new-session -d -s work

  # Window 1: mail + todo split
  tmux new-window -t work:1 -n mail
  tmux send-keys -t work:mail 'neomutt' C-m
  tmux split-window -v -t work:mail
  tmux send-keys -t work:mail.2 "$EDITOR ~/Documents/todo.md" C-m
  tmux select-layout -t work:mail main-vertical

fi

exec tmux attach -t work

