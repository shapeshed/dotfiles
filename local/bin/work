#!/usr/bin/env sh
# 
set -eu

# If session 'work' doesn't exist, create and set it up
if ! tmux has-session -t work 2>/dev/null; then
  tmux new-session -d -s work

  tmux new-window -t work:1 -n mail
  tmux send-keys -t work:mail.0 'neomutt' C-m
  tmux split-window -h -p 20 -t work:mail.0
  tmux send-keys -t work:mail.1 "$EDITOR ~/Documents/todo.md" C-m
  # tmux select-layout -t work:mail main-vertical
  tmux new-window -t work:2 -n news
  tmux send-keys -t work:news.0 "newsboat" C-m
  tmux new-window -t work:3 -n music
  tmux send-keys -t work:music.0 "ncmpcpp" C-m

  tmux select-window -t work:mail
  tmux select-pane -t work:mail.0

fi

exec tmux attach -t work

